+   [Access](https://feitu.gaotu100.com/index-cn/components/access)
    +   [Access-权限控制组件](https://feitu.gaotu100.com/index-cn/components/access)
+   [Audio](https://feitu.gaotu100.com/index-cn/components/audio)
    +   [音频播放](https://feitu.gaotu100.com/index-cn/components/audio)
+   [Auto-download](https://feitu.gaotu100.com/index-cn/components/auto-download)
    +   [自动下载组件](https://feitu.gaotu100.com/index-cn/components/auto-download)
+   [Block-header](https://feitu.gaotu100.com/index-cn/components/block-header)
    +   [表头说明](https://feitu.gaotu100.com/index-cn/components/block-header)
+   [Check-card](https://feitu.gaotu100.com/index-cn/components/check-card)
    +   [可选择的卡片](https://feitu.gaotu100.com/index-cn/components/check-card)
+   [Check-modal](https://feitu.gaotu100.com/index-cn/components/check-modal)
    +   [Modal 选择器](https://feitu.gaotu100.com/index-cn/components/check-modal)
+   [Color-dropdown](https://feitu.gaotu100.com/index-cn/components/color-dropdown)
    +   [即将下线](https://feitu.gaotu100.com/index-cn/components/color-dropdown)
+   [Copy-button](https://feitu.gaotu100.com/index-cn/components/copy-button)
    +   [复制按钮](https://feitu.gaotu100.com/index-cn/components/copy-button)
+   [Date-range-input](https://feitu.gaotu100.com/index-cn/components/date-range-input)
    +   [可输入可选择的日期选择器](https://feitu.gaotu100.com/index-cn/components/date-range-input)
+   [Debounce-select](https://feitu.gaotu100.com/index-cn/components/debounce-select)
    +   [何时使用](https://feitu.gaotu100.com/index-cn/components/debounce-select)
+   [Desensitization](https://feitu.gaotu100.com/index-cn/components/desensitization)
    +   [基础使用](https://feitu.gaotu100.com/index-cn/components/desensitization)
+   [Download-file](https://feitu.gaotu100.com/index-cn/components/download-file)
    +   [基础使用](https://feitu.gaotu100.com/index-cn/components/download-file)
+   [Draw-side](https://feitu.gaotu100.com/index-cn/components/draw-side)
    +   [即将下线](https://feitu.gaotu100.com/index-cn/components/draw-side)
+   [Draw-tabs](https://feitu.gaotu100.com/index-cn/components/draw-tabs)
    +   [基础使用](https://feitu.gaotu100.com/index-cn/components/draw-tabs)
+   [Dropdown-custom](https://feitu.gaotu100.com/index-cn/components/dropdown-custom)
    +   [即将下线](https://feitu.gaotu100.com/index-cn/components/dropdown-custom)
+   [Dynamic-grid](https://feitu.gaotu100.com/index-cn/components/dynamic-grid)
    +   [基础使用](https://feitu.gaotu100.com/index-cn/components/dynamic-grid)
+   [Edit-columns](https://feitu.gaotu100.com/index-cn/components/edit-columns)
    +   [可编辑列](https://feitu.gaotu100.com/index-cn/components/edit-columns)
+   [Ellipsis-tooltip](https://feitu.gaotu100.com/index-cn/components/ellipsis-tooltip)
    +   [基础使用](https://feitu.gaotu100.com/index-cn/components/ellipsis-tooltip)
+   [Error-boundary](https://feitu.gaotu100.com/index-cn/components/error-boundary)
    +   [即将下线](https://feitu.gaotu100.com/index-cn/components/error-boundary)
+   [Feitu-data](https://feitu.gaotu100.com/index-cn/components/feitu-data)
    +   [表单表格场景自动化](https://feitu.gaotu100.com/index-cn/components/feitu-data)
+   [Feitu-footerbar](https://feitu.gaotu100.com/index-cn/components/feitu-footerbar)
    +   [基础使用](https://feitu.gaotu100.com/index-cn/components/feitu-footerbar)
+   [Feitu-pro-form](https://feitu.gaotu100.com/index-cn/components/feitu-pro-form)
    +   [表单组件](https://feitu.gaotu100.com/index-cn/components/feitu-pro-form)
+   [Feitu-provider](https://feitu.gaotu100.com/index-cn/components/feitu-provider)
    +   [基础使用](https://feitu.gaotu100.com/index-cn/components/feitu-provider)
+   [Feitu-table](https://feitu.gaotu100.com/index-cn/components/feitu-table)
    +   [表格](https://feitu.gaotu100.com/index-cn/components/feitu-table)
+   [Input-tag](https://feitu.gaotu100.com/index-cn/components/input-tag)
    +   [基础使用](https://feitu.gaotu100.com/index-cn/components/input-tag)
+   [Limit-input](https://feitu.gaotu100.com/index-cn/components/limit-input)
    +   [基础使用](https://feitu.gaotu100.com/index-cn/components/limit-input)
+   [Main-container](https://feitu.gaotu100.com/index-cn/components/main-container)
    +   [基础使用](https://feitu.gaotu100.com/index-cn/components/main-container)
+   [Preview-modal](https://feitu.gaotu100.com/index-cn/components/preview-modal)
    +   [预览组件](https://feitu.gaotu100.com/index-cn/components/preview-modal)
+   [Quarter-piker](https://feitu.gaotu100.com/index-cn/components/quarter-piker)
    +   [即将下线](https://feitu.gaotu100.com/index-cn/components/quarter-piker)
+   [Region-line](https://feitu.gaotu100.com/index-cn/components/region-line)
    +   [即将下线](https://feitu.gaotu100.com/index-cn/components/region-line)
+   [Scroll-list](https://feitu.gaotu100.com/index-cn/components/scroll-list)
    +   [基础使用](https://feitu.gaotu100.com/index-cn/components/scroll-list)
+   [Scroll-load](https://feitu.gaotu100.com/index-cn/components/scroll-load)
    +   [基础使用](https://feitu.gaotu100.com/index-cn/components/scroll-load)
+   [Search-select](https://feitu.gaotu100.com/index-cn/components/search-select)
    +   [基础使用](https://feitu.gaotu100.com/index-cn/components/search-select)
+   [Search-tag](https://feitu.gaotu100.com/index-cn/components/search-tag)
    +   [基础使用](https://feitu.gaotu100.com/index-cn/components/search-tag)
+   [Select-group](https://feitu.gaotu100.com/index-cn/components/select-group)
    +   [基础使用](https://feitu.gaotu100.com/index-cn/components/select-group)
+   [Select-group-multiple](https://feitu.gaotu100.com/index-cn/components/select-group-multiple)
    +   [基础使用](https://feitu.gaotu100.com/index-cn/components/select-group-multiple)
+   [Select-tag](https://feitu.gaotu100.com/index-cn/components/select-tag)
    +   [基础使用](https://feitu.gaotu100.com/index-cn/components/select-tag)
+   [Statistic-card](https://feitu.gaotu100.com/index-cn/components/statistic-card)
    +   [基础使用](https://feitu.gaotu100.com/index-cn/components/statistic-card)
+   [Statistic-data](https://feitu.gaotu100.com/index-cn/components/statistic-data)
    +   [基础使用](https://feitu.gaotu100.com/index-cn/components/statistic-data)
+   [Upload-crop](https://feitu.gaotu100.com/index-cn/components/upload-crop)
    +   [基础使用](https://feitu.gaotu100.com/index-cn/components/upload-crop)
+   [Upload-file](https://feitu.gaotu100.com/index-cn/components/upload-file)
    +   [基础使用](https://feitu.gaotu100.com/index-cn/components/upload-file)
+   [Utils](https://feitu.gaotu100.com/index-cn/components/utils)
    +   [useBoolean](https://feitu.gaotu100.com/index-cn/components/utils)
+   [Virtual-dom-table](https://feitu.gaotu100.com/index-cn/components/virtual-dom-table)
    +   [基础使用](https://feitu.gaotu100.com/index-cn/components/virtual-dom-table)
+   [Watermark](https://feitu.gaotu100.com/index-cn/components/watermark)
    +   [何时使用](https://feitu.gaotu100.com/index-cn/components/watermark)

+   [何时使用](#%E4%BD%95%E6%97%B6%E4%BD%BF%E7%94%A8)
+   [表格场景](#%E8%A1%A8%E6%A0%BC%E5%9C%BA%E6%99%AF)
+   [数据自动收集](#%E6%95%B0%E6%8D%AE%E8%87%AA%E5%8A%A8%E6%94%B6%E9%9B%86)
+   [ResponsePropsV2](#api-responsepropsv2)
+   [PagerProps](#api-pagerprops)
+   [请求方式](#%E8%AF%B7%E6%B1%82%E6%96%B9%E5%BC%8F)
+   [返回值按路径取](#%E8%BF%94%E5%9B%9E%E5%80%BC%E6%8C%89%E8%B7%AF%E5%BE%84%E5%8F%96)
+   [自定义返回数据](#%E8%87%AA%E5%AE%9A%E4%B9%89%E8%BF%94%E5%9B%9E%E6%95%B0%E6%8D%AE)
+   [自定义请求参数](#%E8%87%AA%E5%AE%9A%E4%B9%89%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0)
+   [首次加载自动请求](#%E9%A6%96%E6%AC%A1%E5%8A%A0%E8%BD%BD%E8%87%AA%E5%8A%A8%E8%AF%B7%E6%B1%82)
+   [自定义校验](#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%A1%E9%AA%8C)
+   [请求阻断](#%E8%AF%B7%E6%B1%82%E9%98%BB%E6%96%AD)
+   [自定义headers](#%E8%87%AA%E5%AE%9A%E4%B9%89headers)
+   [默认参数](#%E9%BB%98%E8%AE%A4%E5%8F%82%E6%95%B0)
+   [滚动表格](#%E6%BB%9A%E5%8A%A8%E8%A1%A8%E6%A0%BC)
+   [API](#api)
+   [高阶](#%E9%AB%98%E9%98%B6)
+   [FeituTableRefProps](#api-feitutablerefprops)
+   [FeituDataRefProps](#api-feitudatarefprops)
+   [FeituFromRefProps](#api-feitufromrefprops)
+   [SelectGroupRefProps](#api-selectgrouprefprops)
+   [表单场景自动化](#%E8%A1%A8%E5%8D%95%E5%9C%BA%E6%99%AF%E8%87%AA%E5%8A%A8%E5%8C%96)
+   [自动回填](#%E8%87%AA%E5%8A%A8%E5%9B%9E%E5%A1%AB)
+   [BackFillProps](#api-backfillprops)

## 表单表格场景自动化

目前B端存在两大场景：表单和表格，这两种场景是非常程式化的，我们希望FeituData与FeituTable及各种表单组件组合能够自动完成这两大场景中普遍式的功能

## 何时使用

上边搜索，下边通过Table展示数据的表格场景 正常的表单提交场景

## 表格场景

### 数据自动收集

+   1
+   2
+   3
+   4

[数据自动收集](#feitu-data-base)

通过fetch配置接口路径就可以自动的实现表格数据的收集展示，并可以自动完成搜索条件的收集，分页的处理等，只需要按照标准的返回格式返回数据，返回格式如下：

### ResponsePropsV2

| Name        | Description                                     | Type                        | Default |
| ----------- | ----------------------------------------------- | --------------------------- | ------- |
| data        | 返回数据                                        | `Record<string, unknown>[]` | `[]`    |
| code        | 返回状态码，0表示成功                           | `number`                    | `0`     |
| msg         | 返回额外信息，一般在code不为0时用来说明错误原因 | `string`                    | `''`    |
| pager       | 分页信息                                        | `PagerProps`                | `{}`    |
| successCode | 成功状态码                                      | `number`                    | `0`     |

### PagerProps

| Name     | Description                      | Type     | Default |
| -------- | -------------------------------- | -------- | ------- |
| current  | 当前页码                         | `number` | `1`     |
| total    | 总数                             | `number` | `0`     |
| pageSize | 每页数量                         | `number` | `10`    |
| pageNum  | 当前页码，不推荐使用 @deprecated | `number` | `1`     |
| count    | 总数，不推荐使用 @deprecated     | `number` | `0`     |

### 请求方式

+   1
+   2
+   3
+   4

[请求方式](#feitu-data-fetch)

可以通过配置`fetch`实现请求方式的变换，默认为`POST`请求，get请求则会在url上拼接字符串类型参数

### 返回值按路径取

+   1
+   2
+   3
+   4

[返回值按路径获取](#feitu-data-datapath)

当返回值的data字段不是数组时，同样可以通过dataPath来配置取数路径

### 自定义返回数据

+   1
+   2
+   3
+   4

[自定义返回值](#feitu-data-formatresult)

当后端的返回值无法直接使用时，可以通过onFormatResult对后端的参数进行格式化处理，我们 ·不·建·议·与`dataPath`一起使用，二者都具备一定的格式化后端数据的能力，但是`onFormatResult`更加的强大，既然使用了`onFormatResult`就无需使用`dataPath`来指定路径了

### 自定义请求参数

+   1
+   2
+   3
+   4

[自定义请求参数](#feitu-data-onbefore)

当搜集到的表单数据无法直接满足后端请求时，仍然可以在请求发送之前开放了的钩子`onBefore`来处理请求参数

### 首次加载自动请求

[首次加载自动请求](#feitu-data-autosearch)

通过`autoSearch`可以灵活的控制首次加载要不要直接请求后端，默认为true，置为false后可以阻止自动的请求行为

### 自定义校验

[自定义校验](#feitu-data-autovalidator)

基本上`form`系列组件自带的校验可以满足日常需求，但是对于一些特殊的校验我们开放了自定义校验的能力，例如：两个搜索条件最少填写一个后才能进行搜索

### 请求阻断

[请求阻断](#feitu-data-onbeforebypromise)

某些情况下我们的请求可能依赖外界状态来决定是否正常发出，当外界条件不满足某些条件时，我们可以用onBeforeByPromise及时阻断请求

### 自定义headers

+   1
+   2
+   3
+   4

### 默认参数

+   1
+   2
+   3
+   4

[默认参数](#feitu-data-defaultparams)

请求参数中某些依赖外部环境的参数可以在`defaultParams`中配置，将在每次请求发送时携带

### 滚动表格

## API

| Name                    | Description                                                                                | Type                                                    | Default                   |
| ----------------------- | ------------------------------------------------------------------------------------------ | ------------------------------------------------------- | ------------------------- |
| isStandardResponse      | 是否标准返回结构 已废弃 @deprecated                                                        | `boolean`                                               | `true`                    |
| pagerConfigRules        | 分页配置规则                                                                               | `PagerConfigRulesProps`                                 | `defaultPagerConfigRules` |
| headers                 | 请求头                                                                                     | `Record<string, string>`                                | `{}`                      |
| autoValidator           | 自定义校验，返回Promise                                                                    | `Promise<unknown>`                                      | `false`                   |
| children                | 子组件                                                                                     | `React.ReactNode`                                       | `(required)`              |
| onSuccess               | 请求成功回调                                                                               | `(res: Record<string, unknown>) => void`                | `() => void`              |
| onError                 | 请求失败回调                                                                               | `(res: Record<string, unknown>) => void`                | `() => void`              |
| defaultParams           | 默认参数                                                                                   | `Record<string, unknown>`                               | `{}`                      |
| fetch                   | 请求地址                                                                                   | `string                                                 | {}`                       | `(required)` |
| onBefore                | 请求前回调                                                                                 | `(params: Record<string, unknown>) => void`             | `() => void`              |
| debounceInterval        | 防抖间隔                                                                                   | `number`                                                | `300`                     |
| useCache                | 是否缓存搜索参数，一般需要与useCache hooks配合使用，用于回到旧的页面时展示用户离开时的状态 | `boolean`                                               | `false`                   |
| onBeforeByPromise       | 请求前回调，返回Promise，根据Promise的状态来决定是否继续发送请求                           | `(params: Record<string, unknown>) => Promise<unknown>` | `() => Promise<unknown>`  |
| autoSearch              | 首次进入页面是否自动搜索                                                                   | `boolean`                                               | `true`                    |
| dataPath                | 取数路径，取到的数据用于在Table中展示，支持多级，如：'data'                                | `string`                                                | `''`                      |
| onReset                 | 重置回调                                                                                   | `() => void`                                            | `() => void`              |
| onFormatResult          | 格式化返回结果                                                                             | `(data: unknown) => unknown[]`                          | `--`                      |
| clearWhenValidateFailed | 搜索条件校验失败是否清空表格数据                                                           | `boolean`                                               | `false`                   |
| backFillProps           | 用于使用FeituProForm的时候，是否需要回填                                                   | `BackFillProps`                                         | `() => void`              |
| ref                     | \--                                                                                        | `Ref<FeituDataRefProps>`                                | `--`                      |
| key                     | \--                                                                                        | `ReactText`                                             | `--`                      |

## 高阶

FeituData的ref对外暴露的大量的属性，通过这些属性可以对FeituData托管的组件进行各种定制化的设置

### FeituTableRefProps

| Name                  | Description                                                                                                | Type                          | Default      |
| --------------------- | ---------------------------------------------------------------------------------------------------------- | ----------------------------- | ------------ |
| getTableParams        | 获取table上的请求参数                                                                                      | `OriginPagerProps`            | `(required)` |
| defaultPager          | 默认分页                                                                                                   | `OriginPagerProps`            | `--`         |
| updatePager           | 更新分页信息，极特殊情况下需要外部手动更新分页信息，一般是缓存的加载                                       | `(pager: PagerProps) => void` | `() => void` |
| resetTable            | 重置表格的分页，排序信息，但不会自动触发新的查询请求，使用时注意保证表格数据与表格分页，排序等状态的一致性 | `() => void`                  | `() => void` |
| resetTableWithRequest | 重置表格的分页，排序信息，并会自动触发新的查询请求                                                         | `() => void`                  | `() => void` |

+   1
+   2
+   3
+   4

[Table的Ref](#feitu-data-feitutablerefprops)

通过Table的Ref我们可以直接对Table上的参数进行一些配置，可以通过将ref传递至FeituData上，然后`ref.current.tableRef()`直接获取Table的Ref的current对象

+   1
+   2
+   3
+   4

[feituDataRef](#feitu-data-feitudatarefprops)

针对一些特殊场景，我们通过ref对外暴露了一些属性，这些属性可以自动查询更加定制化

### FeituDataRefProps

| Name                | Description                                            | Type                                                                       | Default                                                                    |
| ------------------- | ------------------------------------------------------ | -------------------------------------------------------------------------- | -------------------------------------------------------------------------- |
| formRef             | 获取表单实例                                           | `() => FeituFromRefProps`                                                  | `() => FeituFromRefProps`                                                  |
| tableRef            | 获取表格实例                                           | `() => FeituTableRefProps`                                                 | `() => FeituTableRefProps`                                                 |
| formParams          | 获取表单格式化后的值                                   | `() => Record<string, unknown>`                                            | `() => Record<string, unknown>`                                            |
| selectGroupRef      | 获取SelectGroup的值                                    | `() => SelectGroupRefProps`                                                | `() => SelectGroupRefProps`                                                |
| depsParams          | 获取depsParams                                         | `() => Record<string, unknown>`                                            | `() => Record<string, unknown>`                                            |
| setDepsParams       | 设置depsParams                                         | `(params: Record<string, unknown>) => void`                                | `(params: Record<string, unknown>) => void`                                |
| allParams           | 获取所有参数                                           | `() => Record<string, unknown>`                                            | `() => Record<string, unknown>`                                            |
| onSubmit            | 提交查询                                               | `(type: string, params: Record<string, unknown>, isAuto: boolean) => void` | `(type: string, params: Record<string, unknown>, isAuto: boolean) => void` |
| depsRef             | 筛选头的参数                                           | `Record<string, unknown>`                                                  | `{}`                                                                       |
| getTableData        | 获取表格数据                                           | `() => Record<string, unknown>[]`                                          | `() => Record<string, unknown>[]`                                          |
| refresh             | 刷新表格                                               | `() => void`                                                               | `() => void`                                                               |
| form                | 获取表单实例                                           | `() => FormInstance`                                                       | `() => FormInstance`                                                       |
| getFeituFormatValue | 获取表单格式化后的的值, 与feituFormatterOutter配合使用 | `() => Record<string, unknown>`                                            | `() => Record<string, unknown>`                                            |

### FeituFromRefProps

| Name                | Description            | Type                            | Default |
| ------------------- | ---------------------- | ------------------------------- | ------- |
| form                | 表单实例               | `FormInstance`                  | `--`    |
| getFeituFormatValue | 获取表单格式化后的的值 | `() => Record<string, unknown>` | `--`    |

### SelectGroupRefProps

| Name                | Description                                 | Type                                       | Default      |
| ------------------- | ------------------------------------------- | ------------------------------------------ | ------------ |
| defaultValue        | 筛选框的默认值                              | `Record<string, unknown>`                  | `{}`         |
| hasSelectGroup      | 判断页面上是否渲染了高级搜索（SelectGroup） | `{boolean}`                                | `undefined`  |
| setSelectGroupValue | 设置SelectGroup的值                         | `(value: Record<string, unknown>) => void` | `() => void` |

## 表单场景自动化

### 自动回填

### BackFillProps

| Name           | Description                                  | Type                                                           | Default      |
| -------------- | -------------------------------------------- | -------------------------------------------------------------- | ------------ |
| fetch          | 回填fetch请求                                | `FetchProps`                                                   | `(required)` |
| onBefore       | 回填请求发出前的拦截参数，常用来处理请求参数 | `(params: Record<string, unknown>) => Record<string, unknown>` | `--`         |
| onSuccess      | 请求成功回调                                 | `(res: Record<string, unknown>) => void`                       | `() => void` |
| onError        | 请求失败回调                                 | `(res: Record<string, unknown>) => void`                       | `() => void` |
| onFormatResult | 请求完成后，处理返回参数                     | `(res: Record<string, unknown>) => void`                       | `() => void` |
| defaultParams  | 默认参数                                     | `Record<string, unknown>`                                      | `{}`         |

2024/9/2 14:49:59
